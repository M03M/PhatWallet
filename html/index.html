<!DOCTYPE HTML>
<html>
	<head>
		<title>PhatWallet</title>

		<script src="../js/raphael-min.js"></script>
		<script src="../js/pie_labeler.js"></script>
		<script src="../js/pie_renderer.js"></script>
		<script src="../js/PhatPie.js"></script>
		<link href="../css/main.css" rel="stylesheet" type="text/css" />

		<script type="text/javascript">
		window.onload = draw; //Executes draw function when ready

		var main_pie = new PhatPie("Funds", 1000);
		var paper = null;

		function draw() {

			// Assign canvas element to variable
			var canvas = document.getElementById("chart1");

			// Create the HTML5 context object to enable draw methods
			var ctx = canvas.getContext("2d");

			// Creates or clears the canvas
			if(paper == null)
				paper = Raphael("chart2", pie_renderer.width, pie_renderer.height);
			else
				paper.clear();

			// Clearing canvas
			ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);

			// Drawing pie charts
			pie_renderer.render(ctx, main_pie);
			pie_renderer.renderSVG(paper, main_pie);
		}

		function onChartClick(e) {
			var form = document.getElementById("form1");
			var form_name = form.elements[0];
			var form_amount = form.elements[1];

			// Adds a slice if values are not empty
			if(!(form_name.value.localeCompare("")==0 || form_amount.value.localeCompare("")==0))
			{
				main_pie.addSlice(new PhatPie(form_name.value, form_amount.value));
				draw();
			}
		}
		</script>
	</head>
	<body>
		<table border="5dp">
			<thead>
				<td colspan="3">PhatWallet</td>
				<td>View</td>
			</thead>
			<tbody>
				<tr>
					<td colspan="2">CANVAS</td>
					<td colspan="2">SVG</td>
				</tr>
				<tr>
					<td id="Canvas" colspan="2">
						<canvas id="chart1" width="500" height="400">
							<p>Fallback html: Sorry! HTML 5 is required. :(</p>
						</canvas>
						<form id="form1" action="javascript: onChartClick()" method="post">
							<textfield>Name</textfield>
							<input value="5">Amount<input>
							<button>Add slice</button>
						</form>
					</td>
					<td id="SVG" colspan="2">
					    <div id="chart2">
					    	hello
					    </div>
					</td>
				</tr>
			</tbody>
			<tfoot>
				<td><img src="../res/black/pie/pie-48.png"/></td>
				<td><img src="../res/black/view_details/View_Details-48.png"/></td>
				<td><img src="../res/black/settings/settings-48.png"/></td>
				<td><img src="../res/black/info/info-48.png"/></td>
			</tfoot>
		</table>
	</body>
</html>